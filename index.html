<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Калкулатор: заплата + бонус</title>

  <style>
    :root{
      --brand:#ff7a00;
      --bg:#f6f6f6;
      --card:#ffffff;
      --border:#e5e7eb;
      --muted:#6b7280;
      --text:#0f172a;
      --shadow:0 10px 25px rgba(0,0,0,.08);
      --radius:16px;
    }
    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(900px 500px at 10% -10%, rgba(255,122,0,.18), transparent 60%), var(--bg);
      padding:24px 12px;
      color:var(--text);
    }

    .card{
      max-width:780px;
      margin:auto;
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      border:1px solid var(--border);
      overflow:hidden;
    }

    /* ===== HEADER ===== */
    .header{
      display:flex;
      align-items:center;
      gap:14px;
      padding:16px;
      border-bottom:1px solid var(--border);
    }
    .logo{
      width:48px;
      height:48px;
      border-radius:12px;
      background:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      flex:0 0 auto;
    }
    .logo img{
      width:100%;
      height:100%;
      object-fit:contain;
    }
    h1{
      margin:0;
      font-size:18px;
    }
    .sub{
      font-size:12px;
      color:var(--muted);
      margin-top:2px;
    }

    /* ===== BODY ===== */
    .body{ padding:16px; }

    .grid{
      display:grid;
      grid-template-columns:repeat(4,1fr);
      gap:12px;
    }
    @media(max-width:900px){
      .grid{ grid-template-columns:1fr; }
    }

    label{
      display:block;
      font-size:12px;
      font-weight:800;
      margin-bottom:6px;
    }
    select,input{
      width:100%;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--border);
      font-size:14px;
    }

    .btn{
      margin-top:14px;
      width:100%;
      padding:12px;
      border:none;
      border-radius:14px;
      background:var(--brand);
      color:#fff;
      font-weight:900;
      font-size:15px;
      cursor:pointer;
    }

    .note{
      margin-top:10px;
      font-size:12px;
      color:var(--muted);
    }

    /* ===== RESULTS ===== */
    .results{
      margin-top:16px;
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
    }
    @media(max-width:900px){
      .results{ grid-template-columns:1fr; }
    }

    .box{
      background:#f8fafc;
      border:1px solid var(--border);
      border-radius:14px;
      padding:14px;
    }
    .box h2{
      margin:0 0 10px 0;
      font-size:14px;
    }

    .row{
      display:flex;
      justify-content:space-between;
      margin-top:6px;
      font-size:14px;
    }
    .muted{ color:var(--muted); }
    .big{ font-size:18px;font-weight:1000; }

    .pill{
      margin-top:8px;
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      background:rgba(255,122,0,.12);
      color:#9a3f00;
      font-size:12px;
      font-weight:900;
    }

    .netHint{
      font-size:12px;
      color:var(--muted);
      margin-left:6px;
    }

    .hidden{ display:none; }
  </style>
</head>
<body>

<div class="card">

  <!-- HEADER -->
  <div class="header">
    <div class="logo">
      <img src="logo.png" alt="Logo">
    </div>
    <div>
      <h1>Калкулатор: заплата + бонус + амортизация</h1>
      <div class="sub" id="subtitle"></div>
    </div>
  </div>

  <div class="body">

    <!-- INPUTS -->
    <div class="grid">
      <div>
        <label>Договор</label>
        <select id="contract">
          <option value="8">8 часа (820€)</option>
          <option value="6">6 часа (615€)</option>
          <option value="4">4 часа (410€)</option>
          <option value="2">2 часа (205€)</option>
        </select>
      </div>

      <div>
        <label>Превозно средство</label>
        <select id="vehicle">
          <option value="personal">Лична кола</option>
          <option value="company">Служебна кола</option>
          <option value="bike">Служебен велосипед</option>
        </select>
      </div>

      <div>
        <label>Работни дни</label>
        <input id="days" type="number" value="22">
      </div>

      <div>
        <label>Ефективност (поръчки/час)</label>
        <input id="eff" type="number" step="0.1" value="1.8">
      </div>
    </div>

    <button class="btn" onclick="calc()">Изчисли</button>

    <div class="note" id="note"></div>

    <!-- RESULTS -->
    <div class="results">

      <div class="box">
        <h2>Резултат за месеца</h2>
        <div class="row"><span class="muted">Часове/месец</span><span id="oHours"></span></div>
        <div class="row"><span class="muted">Поръчки</span><span id="oOrders"></span></div>
        <div class="row" id="kmRow"><span class="muted">Км</span><span id="oKm"></span></div>
        <div class="pill" id="oTier"></div>
      </div>

      <div class="box">
        <h2>Заплата (бруто / нето)</h2>
        <div class="row"><span>Базова</span><span id="bBase"></span></div>
        <div class="row"><span>Бонус</span><span id="bBonus"></span></div>
        <div class="row" id="amortRow"><span>Амортизация</span><span id="bAmort"></span></div>
        <hr>
        <div class="row"><span><b>Общо бруто</b></span><span class="big" id="bGross"></span></div>
        <div class="row"><span class="muted">Удръжка 22.4%</span><span id="bTax"></span></div>
        <div class="row"><span><b>Общо нето</b></span><span class="big" id="bNet"></span></div>
      </div>

    </div>

  </div>
</div>

<script>
const baseSalary={8:820,6:615,4:410,2:205};
const thresholds={8:[100,200,300],6:[75,150,225],4:[50,100,150],2:[25,50,75]};
const rates=[0.25,1,1.5,3];
const kmPerOrder=5.5;
const tax=0.224;

function calc(){
  const c=+contract.value;
  const v=vehicle.value;
  const d=+days.value;
  const e=+eff.value;

  const hours=c*d;
  const orders=Math.max(0,Math.round(hours*e));
  const km=orders*kmPerOrder;

  let amortRate=0;
  let showAmort=true;
  if(v==="personal") amortRate=0.17;
  if(v==="bike") amortRate=0.11;
  if(v==="company"){ amortRate=0; showAmort=false; }

  const [t1,t2,t3]=thresholds[c];
  const n1=Math.min(orders,t1);
  const n2=Math.max(0,Math.min(orders,t2)-t1);
  const n3=Math.max(0,Math.min(orders,t3)-t2);
  const n4=Math.max(0,orders-t3);

  const bonus=n1*rates[0]+n2*rates[1]+n3*rates[2]+n4*rates[3];
  const amort=km*amortRate;
  const gross=baseSalary[c]+bonus+amort;
  const net=gross*(1-tax);

  oHours.textContent=hours;
  oOrders.textContent=orders;
  oKm.textContent=km.toFixed(1)+" км";
  kmRow.classList.toggle("hidden",!showAmort);

  let tier="Base";
  if(orders>=t3) tier="Super";
  else if(orders>=t2) tier="High";
  else if(orders>=t1) tier="Mid";
  oTier.textContent="Ниво: "+tier;

  bBase.innerHTML=`${baseSalary[c].toFixed(2)} € <span class="netHint">${(baseSalary[c]*(1-tax)).toFixed(2)} €</span>`;
  bBonus.innerHTML=`${bonus.toFixed(2)} € <span class="netHint">${(bonus*(1-tax)).toFixed(2)} €</span>`;
  amortRow.classList.toggle("hidden",!showAmort);
  bAmort.innerHTML=`${amort.toFixed(2)} € <span class="netHint">${(amort*(1-tax)).toFixed(2)} €</span>`;

  bGross.textContent=gross.toFixed(2)+" €";
  bTax.textContent="-"+(gross*tax).toFixed(2)+" €";
  bNet.textContent=net.toFixed(2)+" €";

  subtitle.textContent=v==="company"
    ?"Служебна кола · без амортизация"
    :v==="bike"
      ?"Служебен велосипед · 0.11€/км"
      :"Лична кола · 0.17€/км";
}
calc();
</script>

</body>
</html>
